// ==============================================
// SBS Recruitment App - Global SCSS
// ==============================================
// This file contains:
// - CSS output (Element Plus overrides, component styles)
// It imports _variables.scss and _mixins.scss

@use 'sass:math';
@use 'variables' as *;
@use 'mixins' as *;

// ==================== ELEMENT PLUS CSS VARIABLE OVERRIDES ====================
// SBS Brand Colors - Pre-calculated (ingen SCSS color functions)
// Disse 6 grundfarver styrer HELE projektet:
// Primary=#2d2d2d, Warning=#f1db53, Danger=#ee3123, Success=#2ec700, White=#ffffff, LightGray=#ebebeb

:root {
	// ========== PRIMARY (Dark Gray #2d2d2d) ==========
	--el-color-primary: #2d2d2d;
	--el-color-primary-light-3: #575757;
	--el-color-primary-light-5: #6e6e6e;
	--el-color-primary-light-7: #868686;
	--el-color-primary-light-8: #919191;
	--el-color-primary-light-9: #9d9d9d;
	--el-color-primary-dark-2: #1a1a1a;

	// ========== WARNING (Yellow #f1db53) ==========
	--el-color-warning: #f1db53;
	--el-color-warning-light-3: #f5e57a;
	--el-color-warning-light-5: #f7eb91;
	--el-color-warning-light-7: #f9f0a9;
	--el-color-warning-light-8: #faf3b5;
	--el-color-warning-light-9: #fcf6c1;
	--el-color-warning-dark-2: #d9c23a;

	// ========== DANGER (Red #ee3123) ==========
	--el-color-danger: #ee3123;
	--el-color-danger-light-3: #f26d63;
	--el-color-danger-light-5: #f59089;
	--el-color-danger-light-7: #f8b3af;
	--el-color-danger-light-8: #f9c4c1;
	--el-color-danger-light-9: #fbd6d3;
	--el-color-danger-dark-2: #c91f13;

	// ========== SUCCESS (Green #2ec700) ==========
	--el-color-success: #2ec700;
	--el-color-success-light-3: #5fd93d;
	--el-color-success-light-5: #7ee35f;
	--el-color-success-light-7: #9eec82;
	--el-color-success-light-8: #aef094;
	--el-color-success-light-9: #bef4a6;
	--el-color-success-dark-2: #259e00;

	// ========== RGB KOMPONENTER (for rgba() brug) ==========
	--el-color-primary-rgb: 45, 45, 45;
	--el-color-warning-rgb: 241, 219, 83;
	--el-color-danger-rgb: 238, 49, 35;
	--el-color-success-rgb: 46, 199, 0;
	--el-color-white-rgb: 255, 255, 255;
	--el-fill-color-light-rgb: 235, 235, 235;

	// ========== TEXT ==========
	--el-text-color-primary: #2d2d2d;
	--el-text-color-regular: #2d2d2d;
	--el-text-color-secondary: #606060;
	--el-text-color-placeholder: #a0a0a0;
	--el-text-color-disabled: #c0c0c0;

	// ========== BORDER / FILL / BG ==========
	--el-border-color: #ebebeb;
	--el-border-color-light: #f5f5f5;
	--el-border-color-dark: #d0d0d0;
	--el-fill-color-light: #ebebeb;
	--el-bg-color: #ffffff;
	--el-bg-color-page: #ffffff;

	// ========== FOCUS ==========
	--el-color-focus: #f1db53;
}

// ==================== EL-MESSAGE WARNING STYLING ====================
.el-message--warning {
	background-color: $c-warning !important;
	border-color: $c-warning !important;

	.el-message__content {
		color: $c-primary !important;
		font-family: $font-body !important;
		font-weight: $font-weight-bold !important;
	}

	.el-message__icon {
		color: $c-primary !important;
	}
}

// ==================== EL-LINK GLOBAL STYLING ====================
// Footer links use el-link for consistent styling across pages

// Social media icon links (circular white background)
.social-link {
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	width: $font-size-title !important;
	height: $font-size-title !important;
	background-color: $c-bg !important;
	border-radius: 50% !important;
	color: $c-primary !important;
	transition: transform $transition-duration $transition-ease !important;

	// Ensure VueIcon SVGs inherit color
	svg {
		fill: currentColor !important;
		color: inherit !important;
	}

	&:hover {
		transform: scale(1.1);
		color: $c-primary !important;
	}
}

// Footer link styling (white text, uses el-link default underline on hover)
.footer-link {
	font-family: $font-body !important;
	font-weight: $font-weight-bold !important;
	font-size: $font-size-button !important;
	color: $c-bg !important;
	justify-content: flex-start !important;

	&:hover {
		color: $c-bg !important;
	}

	// Smaller variant for legal links
	&--small {
		font-size: $font-size-body !important;
	}

	// With icon variant
	&--icon {
		.el-link__inner {
			display: flex;
			align-items: center;
			gap: $spacing-xs;
		}
	}
}

// NOTE: All mixins are now defined in _mixins.scss
// They are injected globally via Vite config

// ==================== GLOBAL ELEMENT PLUS BUTTON STYLING ====================
// OPTIMERET: Base styles sættes ÉN gang på .el-button
// Farve-varianter bruger kun button-colors-* mixins

// Base styling for ALLE el-buttons (kun én gang!)
.el-button {
	@include button-base;
	@include button-colors-dark; // Default = dark
}

// Farve-varianter - kun farver, base er allerede sat
.el-button.btn-light,
.btn-light {
	@include button-colors-light;
}

.el-button.btn-yellow,
.btn-yellow {
	@include button-colors-yellow;
}

.el-button.btn-red,
.btn-red {
	@include button-colors-red;
}

.el-button.btn-dark,
.btn-dark {
	@include button-colors-dark;
}

// Element Plus type overrides - kun farver
.el-button--default,
.el-button--primary,
.el-button--info {
	@include button-colors-dark;
}

.el-button--danger {
	@include button-colors-red;
}

.el-button--success,
.el-button--warning {
	@include button-colors-yellow;
}

.el-button.is-plain,
.el-button.is-text {
	@include button-colors-dark;
}

// Disabled button styling - greyed out instead of transparent
.el-button.is-disabled,
.el-button.is-disabled:hover,
.el-button.is-disabled:focus,
.el-button.is-disabled:active {
	background-color: $c-fill-light !important;
	color: $c-primary !important;
	opacity: 0.6;
	cursor: not-allowed;
	box-shadow: none !important;
	border-color: transparent !important;
	pointer-events: none;

	// Prevent arrow animation on disabled state
	.modal-nav-btn__arrow {
		transform: none !important;
		opacity: 1 !important;
		transition: none !important;

		&--2,
		&--3 {
			opacity: 0 !important;
		}
	}
}

// ==================== GLOBAL ELEMENT PLUS FOCUS STYLING ====================
// Gul focus ring for accessibility
// NOTE: Fjernet duplikeret :root blok - focus styling defineres direkte på elementer

// Input/Select text vertical centering - optisk korrektion
// Separate offset værdier for forskellige element typer
$input-offset: math.div((-0.5 - $font-body-cap-height) - $font-body-descender, 2);
$select-offset: math.div((-0.5 - $font-body-cap-height) - $font-body-descender, 2);
$dropdown-offset: math.div((1.25 - $font-body-cap-height) - $font-body-descender, 2);

// Input felter
.el-input__inner,
.el-textarea__inner {
	padding-top: #{$input-offset}em !important;
}

// Select input og placeholder
.el-select__input {
	padding-top: #{$select-offset}em !important;
}

.el-select__placeholder span,
.el-select__selected-item {
	transform: translateY(#{$select-offset}em);
}

// Dropdown items
.el-select-dropdown__item span {
	display: inline-block;
	transform: translateY(#{$dropdown-offset}em);
}

// Input/Select focus
.el-input.is-focus .el-input__wrapper,
.el-input__wrapper:focus-within,
.el-select .el-input.is-focus .el-input__wrapper,
.el-textarea__inner:focus {
	box-shadow: inset 0 0 0 1px $c-warning !important;
	border-color: $c-warning !important;
}

// Button focus - only on keyboard navigation, not click/touch
.el-button:focus {
	outline: none !important;
}

.el-button:focus-visible {
	outline: 2px solid $c-warning !important;
	outline-offset: 2px;
}

// Switch focus
.el-switch.is-checked {
	--el-switch-on-color: #f1db53;
}

.el-switch:focus .el-switch__core {
	outline: 2px solid $c-warning;
	outline-offset: 2px;
}

// Prevent layout shift when modal opens and body scroll is disabled
body.modal-open {
	overflow: hidden;
	padding-right: var(--scrollbar-width, 0);
}

// Global Element Plus dialog (modal) styling
// Max 950px bred på PC/tablet, altid luft til siderne
.el-dialog {
	max-width: 950px;
	width: calc(100% - #{$spacing-lg * 2}) !important;
	margin: $spacing-lg auto;
}

// Tooltip styling - overskriver Element Plus CSS custom properties
.el-popper.is-light {
	--el-popper-bg-color-light: #ffffff;
	color: $c-primary;
}

.el-select-dropdown__item.is-selected {
	color: $c-primary;
	background-color: $c-warning;
}

// ==================== ELEMENT PLUS CARD STYLING ====================

// Base el-card styling - bruges på alle cards
.el-card {
	@include card;
	border: none;
	overflow: hidden;
	transition:
		transform 0.2s ease,
		box-shadow 0.2s ease;

	// Reset el-card body padding
	.el-card__body {
		padding: 0;
		height: 100%;
		display: flex;
		flex-direction: column;
		justify-content: flex-end;
		gap: $spacing-sm;
	}

	// Hover effekt for interaktive cards - løfter card opad
	&--hover:hover,
	&[shadow='hover']:hover {
		transform: translateY(-4px);
		box-shadow: $shadow-modal;
	}
}

// Image Card - card med baggrundsbillede
// Bruges til: job cards, hero cards, etc.
.el-image-card {
	position: relative;
	cursor: pointer;
	height: $image-card-height;
	transition:
		transform $transition-duration $transition-ease,
		box-shadow $transition-duration $transition-ease;

	&:hover {
		transform: translateY(-4px);
		box-shadow: $shadow-modal;
	}

	&__image {
		position: absolute;
		inset: 0;
		background-color: $c-primary;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	&__content {
		position: relative;
		padding-left: $spacing-sm;
	}

	&__title {
		@include subtitle-font;
		font-weight: $font-weight-medium;
		color: $c-bg;
		margin: 0;
		text-shadow: 0 2px 4px rgba(var(--el-color-primary-rgb), 0.5);
	}

	&__button {
		position: relative;
		padding-left: $spacing-sm;
	}
}

// Stat Card - wrapper for el-statistic
// Bruges i: HR Dashboard
.el-stat-card {
	@include card;
	@include flex-column;
	@include flex-center;
	gap: $spacing-sm;
	padding: $spacing-xl;
	transition: all $transition-duration $transition-ease;

	&--clickable {
		cursor: pointer;

		&:hover {
			transform: translateY(-4px);
			box-shadow: $shadow-modal;
		}

		&:active {
			transform: translateY(0);
		}
	}

	// el-statistic styling inside card
	.el-statistic {
		text-align: center;

		.el-statistic__head {
			@include body-font;
			color: $c-primary;
			margin-bottom: $spacing-xs;
		}

		.el-statistic__content {
			.el-statistic__number {
				font-size: $spacing-xl;
				font-weight: $font-weight-bold;
				color: $c-primary;
			}
		}
	}
}

// Interview Card - bruges til kommende samtaler
// Bruges i: HR Dashboard
.el-interview-card {
	@include card;
	display: flex;
	gap: $spacing-lg;
	align-items: stretch;
	padding: $spacing-md;
	transition:
		transform 0.2s ease,
		box-shadow 0.2s ease;

	&:hover {
		transform: translateY(-4px);
		box-shadow: $shadow-modal;
	}

	&__date {
		@include flex-column;
		@include flex-center;
		min-width: 100px;
		padding: $spacing-md;
		background-color: $c-fill-light;
		border-radius: $border-radius-md;
	}

	&__day {
		font-size: $spacing-xl;
		font-weight: $font-weight-bold;
		line-height: 1;
	}

	&__month {
		@include subtitle-font;
		text-transform: capitalize;
	}

	&__info {
		flex: 1;
		@include flex-column;
		gap: $spacing-xs;
	}

	&__name {
		@include subtitle-font;
		margin-bottom: $spacing-sm;
	}

	&__detail {
		@include body-font;
	}

	&__actions {
		@include flex-column;
		gap: $spacing-sm;
		justify-content: center;
	}
}

// ==================== ELEMENT PLUS STEPS STYLING ====================

// Simple steps - bruges til multi-step flows
// Bruges i: ApplicationModal

.el-steps {
	padding: $spacing-sm;
}

.el-steps.is-simple {
	width: 100%;
	padding: $spacing-xs 0;

	.el-step__head {
		cursor: pointer;
	}

	.el-steps.is-simple .el-step__main {
		width: 100%;
	}

	.el-step__title {
		cursor: pointer;
		@include body-font;
		padding-top: $spacing-xs;
	}

	.el-step__icon {
		border-color: $c-primary;
		color: $c-primary;
	}
}

// All steps - dark-grey icon and text by default
.el-step.is-simple .el-step__icon {
	border-color: $c-primary !important;
	color: $c-primary !important;
	transition: all $transition-duration $transition-ease;
	cursor: pointer;
}

.el-step.is-simple .el-step__title {
	color: $c-primary !important;
	transition: all $transition-duration $transition-ease;
	cursor: pointer;
}

// Hover effect - lift up like cards
.el-step.is-simple:hover .el-step__icon {
	transform: translateY(-4px);
}

.el-step.is-simple:hover .el-step__title {
	transform: translateY(-4px);
}

// Completed state - disable hover and pointer cursor
.el-steps.is-completed .el-step.is-simple .el-step__icon,
.el-steps.is-completed .el-step.is-simple .el-step__title {
	cursor: default;
}

.el-steps.is-completed .el-step.is-simple:hover .el-step__icon,
.el-steps.is-completed .el-step.is-simple:hover .el-step__title {
	transform: none;
}

// Arrow connectors - outside nesting for correct specificity
.el-step.is-simple .el-step__arrow {
	padding-top: calc($spacing-xs / 2) !important;
}

.el-step.is-simple .el-step__arrow::before,
.el-step.is-simple .el-step__arrow::after {
	height: 10px !important;
}

.el-step.is-simple .el-step__arrow::before {
	transform: rotate(-45deg) translateY(-3px) !important;
}

.el-step.is-simple .el-step__arrow::after {
	transform: rotate(45deg) translateY(3px) !important;
}

// Step title - remove break-word
.el-step.is-simple:not(:last-of-type) .el-step__title {
	overflow-wrap: normal !important;
}

// =============================================================================
// EL-TAG - Status badges/chips
// =============================================================================
// Bruges til: calendar chips, status badges, category tags

.el-tag {
	transition: all $transition-duration $transition-ease;

	// Calendar status chips - mini size
	&.el-tag--mini {
		font-size: 10px;
		font-weight: $font-weight-medium;
		padding: 2px 5px;
		height: auto;
		line-height: 1.4;
		border: none;
		min-width: 16px;
		text-align: center;
	}

	// Custom color variants for calendar
	&--available {
		background-color: $c-warning !important;
		color: $c-primary !important;
	}

	&--reserved {
		background-color: $c-danger !important;
		color: $c-bg !important;
	}

	&--booked {
		background-color: $c-primary !important;
		color: $c-bg !important;
	}
}

// =============================================================================
// EL-DIVIDER - Horizontal/vertical dividers
// =============================================================================
// Bruges til: section dividers, "eller" separators

.el-divider {
	// Text divider - "eller opret manuelt"
	&--horizontal.el-divider--with-text {
		margin: $spacing-sm 0;

		.el-divider__text {
			@include body-font;
			color: $c-primary;
			font-size: 11px;
			background-color: transparent;
			padding: 0 $spacing-sm;
		}
	}

	&::before,
	&::after {
		border-color: $c-fill-light !important;
	}
}

// =============================================================================
// V-LOADING - Loading states
// =============================================================================
// Brug: v-loading="isLoading" på container elementer

.el-loading-mask {
	background-color: rgba(var(--el-color-white-rgb), 0.9);
	border-radius: inherit;

	.el-loading-spinner {
		.circular {
			animation: loading-rotate 2s linear infinite;
		}

		.path {
			stroke: $c-warning;
		}
	}
}

// Info Card - card med ikon, titel og tekst
// Bruges til: benefit cards, feature cards
.el-info-card {
	@include flex-center;
	@include flex-column;
	justify-content: flex-start;
	gap: $spacing-sm;
	padding: $spacing-lg;
	text-align: center;
	transition:
		transform $transition-duration $transition-ease,
		box-shadow $transition-duration $transition-ease;
	border-radius: $border-radius-md;

	&:hover {
		transform: translateY(-4px);
		box-shadow: $shadow-modal;
	}

	&__icon {
		@include flex-center;
		width: $benefit-icon-size;
		height: $benefit-icon-size;
		background-color: $c-fill-light;
		border-radius: 50%;
		color: $c-primary;
		margin-bottom: $spacing-sm;
	}

	&__title {
		@include body-bold-font;
		font-size: 14px;
		color: $c-primary;
		margin: 0;
	}

	&__text {
		@include body-font;
		font-size: $font-size-body;
		color: $c-primary;
		line-height: 1.5;
		margin: 0;
	}
}

// ==================== MODAL WRAPPER (genbruges i JobModal og ApplicationModal) ====================

// Modal Wrapper - custom modal container
// Højde: 660px (eller viewport - 24px padding hvis for lille)
// Max bredde PC: 950px, Altid 12px padding i siderne
.modal-wrapper {
	position: fixed;
	inset: 0;
	z-index: $z-index-modal;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: $spacing-md; // 12px padding på alle sider

	&__backdrop {
		position: absolute;
		inset: 0;
		background-color: rgba(var(--el-color-primary-rgb), 0.5);
	}

	&__container {
		position: relative;
		display: flex;
		flex-direction: column;
		gap: $spacing-sm;
		max-width: 950px; // Max bredde på PC
		width: 100%;
		z-index: 1;
		height: $modal-height-standard; // Total højde inklusiv knapper
		max-height: calc(100vh - #{$spacing-md * 2}); // Viewport minus padding
		transition: height $transition-duration $transition-ease;

		// Større højde på bredere skærme (ikke for application modal)
		@media (min-width: 990px) {
			height: 850px;
		}

		// Application modal skal forblive 660px og 570px bred
		&--fixed-height {
			height: $modal-height-standard;
			max-width: 570px;

			@media (min-width: 990px) {
				height: $modal-height-standard;
				max-width: 570px;
			}
		}

		&--fullscreen {
			max-width: min($modal-max-width-wide, calc(100vw - $spacing-xl));
			height: calc(100vh - $spacing-xl);
			max-height: calc(100vh - $spacing-xl);
		}
	}

	&__modal {
		background-color: $c-bg;
		border-radius: $border-radius-lg;
		box-shadow: $shadow-modal;
		overflow: hidden;
		flex: 1; // Fyld resten af container (660px - knaphøjde - gap)
		display: flex;
		flex-direction: column;
		position: relative; // For close button positioning

		// Skygge under lukkeknappen - klippet af overflow: hidden
		&::before {
			content: '';
			position: absolute;
			top: -20px;
			right: -20px;
			width: calc(#{$close-btn-size-mobile} + 20px);
			height: calc(#{$close-btn-size-mobile} + 20px);
			background-color: $c-fill-light;
			border-radius: 0 0 0 20px;
			box-shadow: -6px 6px 12px rgba(var(--el-color-primary-rgb), 0.2);
			z-index: 5;
			pointer-events: none;
		}
	}

	&__scroll-area {
		flex: 1;
		overflow: hidden; // OverlayScrollbars handles overflow
	}

	&__actions {
		display: flex;
		gap: $spacing-sm;
		width: 100%;
	}
}

// Modal Navigation Buttons (outside modal) - Kun størrelses-styling, farver via Element Plus type prop
.modal-nav-btn {
	// Kun størrelses-tilpasninger - alt andet kommer fra button-dark/yellow/red
	flex: 1;
	height: $spacing-xl;
	padding: 0 $spacing-md;
	font-size: $font-size-subtitle;
	// Centrér indhold (ikoner og tekst)
	display: inline-flex;
	align-items: center;
	justify-content: center;

	// Element Plus wrapper span - skal fylde knappen
	> span {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
	}

	// Override el-button icon size
	.el-icon {
		font-size: $font-size-subtitle;
	}

	// Close button with rotated X icon (45 degrees)
	&--close {
		.el-icon {
			transform: rotate(45deg);
		}
	}

	// Full width modifier
	&--full {
		flex: none;
		width: 100%;
	}

	// Fix warning button text color (should be dark on yellow background)
	&.el-button--warning {
		color: $c-primary;

		&:hover,
		&:focus,
		&:active {
			color: $c-primary;
		}
	}

	// Next button with animated arrows (racer style)
	&--next {
		overflow: hidden;

		.modal-nav-btn__arrows {
			display: inline-flex;
			align-items: center;
			position: relative;
		}

		.modal-nav-btn__arrow {
			font-size: $font-size-subtitle;
			transition: all $transition-duration $transition-ease;

			// Pil 1 er synlig og rykker sig på hover
			&--1 {
				position: relative;
				z-index: 1;
			}

			// Pile 2 og 3 ligger bag pil 1 og fader ind
			&--2,
			&--3 {
				position: absolute;
				opacity: 0;
				left: 0;
			}

			&--2 {
				left: 0em;
			}

			&--3 {
				left: -0.5em;
			}
		}

		&:hover {
			.modal-nav-btn__arrow--1 {
				transform: translateX(0.5em);
			}

			.modal-nav-btn__arrow--2 {
				opacity: 1;
				transition-delay: 0.05s;
			}

			.modal-nav-btn__arrow--3 {
				opacity: 1;
				transition-delay: 0.1s;
			}
		}
	}

	// Prev button with animated arrows (mirrored racer style)
	&--prev {
		overflow: hidden;

		.modal-nav-btn__arrows {
			display: inline-flex;
			align-items: center;
			position: relative;
		}

		.modal-nav-btn__arrow {
			font-size: $font-size-subtitle;
			transition: all $transition-duration $transition-ease;

			// Pil 1 er synlig og rykker sig på hover
			&--1 {
				position: relative;
				z-index: 1;
			}

			// Pile 2 og 3 ligger bag pil 1 og fader ind
			&--2,
			&--3 {
				position: absolute;
				opacity: 0;
				right: 0;
			}

			&--2 {
				right: 0em;
			}

			&--3 {
				right: -0.5em;
			}
		}

		&:hover {
			.modal-nav-btn__arrow--1 {
				transform: translateX(-0.5em);
			}

			.modal-nav-btn__arrow--2 {
				opacity: 1;
				transition-delay: 0.05s;
			}

			.modal-nav-btn__arrow--3 {
				opacity: 1;
				transition-delay: 0.1s;
			}
		}
	}
}

// ==================== MODAL ANIMATIONS ====================

// Combined modal animation (fade backdrop + scale container)
.modal-enter-active,
.modal-leave-active {
	transition: opacity $transition-duration-slow $transition-ease;

	.modal-wrapper__container {
		transition: all $transition-duration-slow $transition-ease;
	}
}

.modal-enter-from,
.modal-leave-to {
	opacity: 0;

	.modal-wrapper__container {
		opacity: 0;
		transform: scale(0.9);
	}
}

// Slide left animation (forward navigation)
.slide-left-enter-active,
.slide-left-leave-active {
	transition: all $transition-duration-slow $transition-ease;
}

.slide-left-enter-from {
	opacity: 0;
	transform: translateX($slide-offset);
}

.slide-left-leave-to {
	opacity: 0;
	transform: translateX(-$slide-offset);
}

// Slide right animation (backward navigation)
.slide-right-enter-active,
.slide-right-leave-active {
	transition: all $transition-duration-slow $transition-ease;
}

.slide-right-enter-from {
	opacity: 0;
	transform: translateX(-$slide-offset);
}

.slide-right-leave-to {
	opacity: 0;
	transform: translateX($slide-offset);
}

// ==================== OVERLAYSCROLLBARS STYLING ====================
// Custom styling for OverlayScrollbars in modals
.os-theme-dark > .os-scrollbar > .os-scrollbar-track > .os-scrollbar-handle {
	background: rgba(var(--el-color-primary-rgb), 0.3);
	border-radius: 4px;

	&:hover {
		background: rgba(var(--el-color-primary-rgb), 0.5);
	}
}

.os-theme-dark > .os-scrollbar-vertical {
	width: 8px;
}

.os-theme-dark > .os-scrollbar > .os-scrollbar-track {
	background: transparent;
}

// ==================== DIALOG SCALE ANIMATION ====================

// Custom scale transition for el-dialog (matches frontend modal)
.dialog-scale-enter-active,
.dialog-scale-leave-active {
	transition: opacity $transition-duration-slow $transition-ease;

	.el-dialog {
		transition: all $transition-duration-slow $transition-ease;
	}
}

.dialog-scale-enter-from,
.dialog-scale-leave-to {
	opacity: 0;

	.el-dialog {
		opacity: 0;
		transform: scale(0.9);
	}
}

// ==================== CALENDAR MODAL - GLOBAL STYLES ====================
// Used by ApplicationModal and CalendarSlotPicker

.calendar-modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: rgba(0, 0, 0, 0.5);
	display: flex;
	align-items: center;
	justify-content: center;
	padding: $spacing-md;
	z-index: 3000;
}

.calendar-modal {
	background-color: $c-bg;
	border: $border-width-thin solid $c-primary;
	border-radius: $border-radius-lg;
	box-shadow: $shadow-modal;
	padding: $spacing-md;
	width: 100%;
	min-width: 350px;
	max-width: 390px;
	min-height: $calendar-min-height;

	&__content {
		width: 100%;
		height: 100%;
		overflow: visible;
	}

	&__header {
		display: grid;
		grid-template-columns: 1fr auto 1fr;
		align-items: center;
		padding-bottom: calc($spacing-md + 10px); // Ekstra plads til knap-skygge
		gap: $spacing-sm;
		width: 100%;
	}

	&__title {
		@include body-font;
		font-size: 14px;
		font-weight: 500;
		text-transform: capitalize;
		white-space: nowrap;
		justify-self: start;
		min-width: 110px; // Fast bredde så layout ikke hopper
	}

	&__today-btn {
		@include button-dark;
		// Lokale størrelses-tilpasninger - samme højde som nav-knapper
		height: 28px;
		padding: 0 $spacing-sm;
		font-size: $font-size-body;
		justify-self: center;
		min-width: 50px;
	}

	&__today-placeholder {
		justify-self: center;
		// Samme størrelse som today-btn så layout ikke hopper
		min-width: 50px;
		height: 28px;
	}

	&__controls {
		display: flex;
		gap: 4px;
		justify-self: end;
	}

	&__nav {
		@include button-dark;
		// Lokale størrelses-tilpasninger
		width: 28px;
		height: 28px;
		padding: 0;

		.el-icon {
			color: inherit;
			font-size: 14px;
		}
	}

	&__nav-placeholder {
		width: 28px;
		height: 28px;
	}

	&__calendar-wrapper {
		position: relative;
		overflow: hidden;
		// Fast højde så kalenderen ikke hopper når man skifter måned (6 rækker max)
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		flex: 1;
		min-height: 368px; // Plads til 6 rækker + legend
		width: 100%;
	}

	&__calendar {
		// Override Element Plus calendar cell width/height variable
		--el-calendar-cell-width: 40px;

		width: 100%;
		border: none;
		overflow: hidden;

		.el-calendar__header {
			display: none !important;
		}

		.el-calendar__body {
			padding: 0 !important;
			width: 100%;
		}

		.el-calendar-table {
			table-layout: fixed;
			width: 100%;
			border-collapse: separate;
			border-spacing: 4px;
			border: none !important;
			height: 100%;

			thead {
				border: none !important;

				th {
					@include body-font;
					font-size: $font-size-body;
					padding: $spacing-xs 0;
					text-align: center;
					height: auto;
					border: none !important;
					height: 100%;
				}
			}

			tbody {
				display: table-row-group;
				border: none !important;
				height: 100%;
			}

			tr {
				border: none !important;
				height: 100%;
			}

			td {
				border: none !important;
				padding: 0;
				height: 100%;
			}
		}

		// Override ALL Element Plus is-selected and is-today styling
		.el-calendar-table td.is-today,
		.el-calendar-table td.is-selected,
		.el-calendar-table td.is-today.is-selected {
			background-color: transparent !important;

			.el-calendar-day {
				background-color: transparent !important;
				height: 100%;
			}
		}

		.el-calendar-day {
			padding: 0 !important;
			background-color: transparent !important;
			height: 100%;

			&:hover {
				background-color: transparent !important;
			}
		}
	}

	&__day {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		aspect-ratio: 1; // Ensure square days
		// font arves fra body
		cursor: default;
		border-radius: $border-radius-sm;
		transition:
			background-color 0.15s ease,
			color 0.15s ease;
		background-color: transparent;

		&--today {
			border: $border-width-normal solid $c-primary;
		}

		&--has-slots {
			background-color: $c-warning;
			color: $c-primary;
			cursor: pointer;

			&:hover {
				background-color: $c-fill-light;
				color: $c-primary;
			}
		}

		// Available dates (for manual date picker - all future dates are selectable)
		&--available {
			background-color: $c-warning;
			color: $c-primary;
			cursor: pointer;

			&:hover {
				background-color: $c-fill-light;
				color: $c-primary;
			}
		}

		// Today with available slots (not selected) - show border with padding
		&--today#{&}--has-slots:not(#{&}--selected),
		&--today#{&}--available:not(#{&}--selected) {
			background-clip: content-box;
			padding: 2px;
		}

		&--selected#{&}--has-slots,
		&--selected#{&}--available {
			background-color: $c-primary;
			color: $c-bg;

			&:hover {
				background-color: $c-primary;
				color: $c-bg;
			}
		}

		// Today + selected - show border with padding on yellow background
		&--today#{&}--selected#{&}--has-slots,
		&--today#{&}--selected#{&}--available {
			background-clip: content-box;
			padding: 2px;
		}

		&--disabled {
			cursor: default;
			pointer-events: none;
			background-color: transparent !important;
		}

		&--other-month {
			opacity: 0.3;
			pointer-events: none;
			background-color: transparent !important;
		}
	}

	&__legend {
		display: flex;
		gap: $spacing-sm;
		justify-content: center;
		margin-top: auto; // Skub legend til bunden
		flex-shrink: 0; // Forhindrer legend i at krympe
	}

	&__legend-item {
		display: flex;
		align-items: center;
		gap: $spacing-sm;
	}

	&__legend-color {
		width: 44px;
		aspect-ratio: 1;
		border-radius: $border-radius-sm;

		&--today {
			background-color: transparent;
			border: $border-width-normal solid $c-primary;
		}

		&--available {
			background-color: $c-warning;
		}

		&--selected {
			background-color: $c-primary;
		}
	}

	&__legend-label {
		// font arves fra body - ingen override nødvendig
		display: inline;
	}
}

// Calendar modal transitions
.calendar-modal-enter-active,
.calendar-modal-leave-active {
	transition: opacity $transition-duration $transition-ease;
}

.calendar-modal-enter-from,
.calendar-modal-leave-to {
	opacity: 0;
}

// Fade transition for "I dag" button and prev nav button
.fade-enter-active,
.fade-leave-active {
	transition: opacity $transition-duration $transition-ease;
}

.fade-enter-from,
.fade-leave-to {
	opacity: 0;
}

// Calendar slide transitions for month navigation
.calendar-slide-left-enter-active,
.calendar-slide-left-leave-active,
.calendar-slide-right-enter-active,
.calendar-slide-right-leave-active {
	transition: all 0.25s ease;
}

.calendar-slide-left-enter-from {
	opacity: 0;
	transform: translateX(20px);
}

.calendar-slide-left-leave-to {
	opacity: 0;
	transform: translateX(-20px);
}

.calendar-slide-right-enter-from {
	opacity: 0;
	transform: translateX(-20px);
}

.calendar-slide-right-leave-to {
	opacity: 0;
	transform: translateX(20px);
}

// ==================== GLOBAL TOOLTIP STYLES ====================
// Age hint tooltip - simple styling, positioning handled by parent container
.age-hint-tooltip {
	font-size: $font-size-small;
	line-height: 1.4;
	font-style: italic;
	font-weight: 600;
	box-shadow: $shadow-card;
	z-index: 10;
}
