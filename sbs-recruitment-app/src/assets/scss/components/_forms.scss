// =============================================================================
// EL-FORM ELEMENTS
// =============================================================================
// Input, select, switch og dialog styling.
// Inkluderer focus styling og optisk vertikal centrering.

@use 'sass:math';
@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// Gul focus ring for accessibility
$input-offset: math.div((-0.5 - $font-body-cap-height) - $font-body-descender, 2);
$select-offset: math.div((-0.5 - $font-body-cap-height) - $font-body-descender, 2);
$dropdown-offset: math.div((1.25 - $font-body-cap-height) - $font-body-descender, 2);

// Input felter
.el-input__inner,
.el-textarea__inner {
	font-size: $font-size-input !important; // Prevent iOS Safari auto-zoom
}

// Input wrapper styling
.el-input__wrapper {
	border-radius: $border-radius-sm !important;
}

// Select input og placeholder
.el-select__input {
	padding-top: #{$select-offset}em !important;
}

.el-select__placeholder span,
.el-select__selected-item {
	transform: translateY(#{$select-offset}em);
}

.el-select__wrapper {
	border-radius: $border-radius-sm !important;
}

.el-select__input,
.el-select__placeholder {
	font-size: $font-size-input !important; // Prevent iOS Safari auto-zoom
	font-family: $font-body !important;
}

.el-select__selected-item span {
	font-family: $font-body;
}

// Dropdown items
.el-select-dropdown__item {
	font-size: $font-size-input !important; // Match input font-size
	font-family: $font-body;

	span {
		display: inline-block;
		transform: translateY(#{$dropdown-offset}em);
	}

	&.is-selected {
		color: $c-primary;
		background-color: $c-warning;
	}
}

// Input/Select focus styling
.el-input__wrapper:has(:focus),
.el-input__wrapper:has(:focus-visible),
.el-select__wrapper:has(:focus),
.el-select__wrapper:has(:focus-visible),
.el-select__wrapper.is-focused,
.el-textarea__inner:focus,
.el-textarea__inner:focus-visible {
	box-shadow: inset 0 0 0 2px $c-warning !important;
	border-color: transparent !important;
}

// Upload focus
.el-upload:focus-visible {
	outline: none;
	box-shadow: inset 0 0 0 2px $c-warning !important;
	background-color: rgba($c-primary, 0.05);
}

// Switch focus (kun keyboard, ikke touch)
.el-switch.is-checked {
	--el-switch-on-color: #{$color-yellow};
}

.el-switch:has(:focus-visible) .el-switch__core {
	outline: 2px solid $c-warning;
	outline-offset: 2px;
}

// Tooltip styling - overskriver Element Plus CSS custom properties
.el-popper.is-light {
	--el-popper-bg-color-light: #{$color-white};
	color: $c-primary;
}

// Age hint tooltip (ApplicationModal alder-felt)
.age-hint-tooltip {
	font-size: $font-size-body;
	line-height: 1.4;
	font-style: italic;
	font-weight: 600;
	box-shadow: $shadow-card;
	z-index: 10;
}

// Native input styling (for autofill compatibility - WCAG 1.3.5)
// These inputs use native HTML for proper browser autofill support
.el-form-item input[type='text'],
.el-form-item input[type='tel'],
.el-form-item input[type='email'] {
	width: 100%;
	height: 32px;
	padding: 1px 11px;
	font-size: $font-size-input;
	font-family: $font-body;
	line-height: 30px;
	color: var(--el-input-text-color, var(--el-text-color-regular));
	background-color: var(--el-input-bg-color, var(--el-fill-color-blank));
	background-image: none;
	border: 1px solid var(--el-input-border-color, var(--el-border-color));
	border-radius: $border-radius-sm;
	box-sizing: border-box;
	outline: none;
	transition:
		border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1),
		box-shadow 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);

	&::placeholder {
		color: var(--el-input-placeholder-color, var(--el-text-color-placeholder));
	}

	&:hover {
		border-color: var(--el-input-hover-border-color, var(--el-border-color-hover));
	}

	&:focus,
	&:focus-visible {
		border-color: transparent;
		box-shadow: inset 0 0 0 2px $c-warning;
		outline: none;
	}
}
